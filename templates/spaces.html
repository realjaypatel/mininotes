{% extends "base.html" %}
{% block content %}
<div class="max-w-4xl mx-auto p-6">
  
  <!-- Header with New Space button -->
  <div class="flex items-center justify-between mb-4">
    <h3 class="text-2xl font-semibold">{{ org }}</h3>
    <a href="{{ url_for('new_space', org=org) }}"
       class="px-4 py-2 bg-slate-900 text-white rounded-md hover:bg-slate-700 transition">
      + New Space
    </a>
  </div>

  <!-- Help text + search -->
  <div class="mb-6">
    <p class="text-slate-500 mb-2">How can I help you today? Search for a space or create a new one.</p>
    <form method="GET" action="{{ url_for('org_search', org=org) }}">
      <input type="text" name="q" placeholder="Search spaces..."
             class="w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-slate-400">
    </form>
  </div>

  {% if not spaces %}
    <p class="text-slate-500">No spaces yet. Create one using the button above.</p>
  {% else %}
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
      {% for space in spaces %}
        <div class="bg-white shadow-sm rounded-md p-4 hover:shadow-md transition flex justify-between items-center">
          <a href="{{ url_for('view_space', org=org, space=space.name) }}" class="font-medium text-slate-900">
            {{ space.name }}
          </a>
          <a href="{{ url_for('edit_space', org=org, space_id=space._id) }}"
             class="text-sm text-slate-700 hover:underline ml-2">
            Edit
          </a>
        </div>
      {% endfor %}
    </div>
  {% endif %}
</div>
{% endblock %}
